<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<title>Seguimiento</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.css' rel='stylesheet' />	<style>
		body { margin:0; padding:0; }
		#map { position:absolute; top:0; bottom:0; width:100%; }
	</style>
</head>
<body>
 
	<div id='map'></div>
	<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoiYmFiYWxpZXIiLCJhIjoiY2p0d3d3dDExMHRkeDQ0cGxqM2h4ZnBmbSJ9.ApporbXy5_wb4TjEUHnWmQ';
		var tiempo = 9000;//tiempo en milisegundos
		var coordenadasX = [-2.95793, -2.94805, -2.93213, -2.90793];
		var coordenadasY = [43.27436, 43.27225, 43.24564, 43.17505];
		_img = document.getElementById('map').innerHTML = "Su autobús se encuentra aquí";

		var i=0;
		
		setInterval(function(){
		imgsrcx = coordenadasX[i];
		imgsrcy = coordenadasY[i];

		a = document.getElementById('map').innerHTML = i;
		var map = new mapboxgl.Map({
		container: 'map',
		style: 'mapbox://styles/mapbox/streets-v11',
		zoom: 18,
		center: [coordenadasX[i], coordenadasY[i]]
		});
		
		map.on('load', function() {
			mapboxgl.accessToken = 'pk.eyJ1IjoiYmFiYWxpZXIiLCJhIjoiY2p0d3d3dDExMHRkeDQ0cGxqM2h4ZnBmbSJ9.ApporbXy5_wb4TjEUHnWmQ';
			map.loadImage('https://thumbs.dreamstime.com/z/el-autob%C3%BAs-para-dise%C3%B1o-aislado-perno-del-icono-de-la-ubicaci%C3%B3n-74194648.jpg', function(error, image) {
			if (error) throw error;
				map.addImage('cat', image);
				map.addLayer({
				"id": "points",
				"type": "symbol",
				"source": {
				"type": "geojson",
				"data": {
				"type": "FeatureCollection",
				"features": [{
				"type": "Feature",
				"geometry": {
				"type": "Point",
				"coordinates": [imgsrcx, imgsrcy]
				}
				}]
				}
				},
				"layout": {
				"icon-image": "cat",
				"icon-size": 0.025
				}
			});
			});
			});
			i = (i == coordenadasX.length-1)? 0 : (i+1);			
			}, tiempo);
 
	</script>
</body>
</html>