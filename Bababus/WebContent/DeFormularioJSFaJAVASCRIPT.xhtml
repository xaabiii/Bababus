<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">

<h:head>
<title>Seguimiento</title>
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.css' rel='stylesheet' />	
<div id='map'></div>      
<script>

	function onCall(form) {  
		var lat=form["formname:lati"].value;
		var lon=form["formname:longi"].value;
		_img = document.getElementById('map').innerHTML = "Su autobús se encuentra aquí";
		l = document.getElementById('map').innerHTML = lat;
		
		
		mapboxgl.accessToken = 'pk.eyJ1IjoiYmFiYWxpZXIiLCJhIjoiY2p0d3d3dDExMHRkeDQ0cGxqM2h4ZnBmbSJ9.ApporbXy5_wb4TjEUHnWmQ';
		var map = new mapboxgl.Map({
			container: 'map',
			style: 'mapbox://styles/mapbox/streets-v11',
			zoom: 18,
			center: [lat, lon]
			});

			
	}

</script>
</h:head>


<body>
<h:form id="formname">
	<h:commandButton action="#{temporizadorMB.preparaCoordenada()}" value="prepara" />
	<h:inputHidden id="lati" value="#{temporizadorMB.latitud}" />
	<h:inputHidden id="longi" value="#{temporizadorMB.longitud}" />
	<h:commandButton value="click" onclick="onCall(this.form)"/>
</h:form>
</body>	
</html>